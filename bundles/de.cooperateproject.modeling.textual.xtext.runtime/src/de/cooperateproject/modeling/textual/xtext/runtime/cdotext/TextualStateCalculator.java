/*
 * generated by Xtext 2.10.0
 */
package de.cooperateproject.modeling.textual.xtext.runtime.cdotext;

import org.eclipse.emf.ecore.EObject;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.xtext.resource.IDerivedStateComputer;

import com.google.inject.Inject;

import de.cooperateproject.modeling.textual.xtext.runtime.generator.AbstractDerivedStateGenerator;
import net.winklerweb.cdoxtext.runtime.ICDOResourceStateCalculator;

public class TextualStateCalculator implements ICDOResourceStateCalculator {

    @Inject
    private IDerivedStateComputer derivedStateComputer;

    @Override
    public void calculateState(Resource r) {
        r.getContents().forEach(this::calculateState);
    }

    @Override
    public void calculateState(EObject object) {
        ((AbstractDerivedStateGenerator) derivedStateComputer).installDerivedState(object);
    }

    @Override
    public void simulateReloadingResource(Resource r) {
        r.getContents().forEach(this::simulateReloadingResource);
    }

    @Override
    public void simulateReloadingResource(EObject object) {
        ((AbstractDerivedStateGenerator) derivedStateComputer).simulateReloadingResource(object);
    }

}

// automatically generated by Xtext
grammar de.cooperateproject.modeling.textual.component.Component with org.eclipse.xtext.common.Terminals

import "http://www.cooperateproject.de/modeling/textual/component/Component"
import "http://www.eclipse.org/emf/2002/Ecore" as ecore
import "http://www.cooperateproject.de/modeling/textual/commons" as textualCommons
import "platform:/plugin/org.eclipse.uml2.uml/model/UML.ecore" as uml

ComponentDiagram returns ComponentDiagram: 
	'ComponentDiagram'
	'{'
		'@start-cpd' title=EString
		 rootpackage=RootPackage
		'@end-clsd'
	'}';


ElementRelation returns ElementRelation: 
	Generalization | Abstraction | Manifestation | Substitution | Dependency;

ElementContent returns ElementContent: 
	Interface | Component;

NameString returns ecore::EString: 
	STRING
;


PortRelation returns PortRelation: 
	Connector;

InterfaceRelation returns InterfaceRelation: 
	Provide | Require;


Member returns Member: 
	Method | Attribute;



EString returns ecore::EString: 
	STRING | ID;

RootPackage returns RootPackage: 
	{RootPackage}
	'rootPackage' name=FQN
			relation+=ElementRelation*
			elementcontent+=ElementContent*
	;

Component returns Component: 
	{Component}
	'Component'
	((name=STRING 'as' alias = ID)|name = ID) ( (comments+=Comment)? |
		(('{' (comments+=Comment)? 
		(component+=Component)*
		(port+=PortRelation)*
		(interfacerelation+=InterfaceRelation)*
		(interface+=Interface)* '}')))
		
		;


Generalization returns Generalization:
		'isa' '(' component+=[Component|EString] "," component+=[Component|EString] ')' 
;

Abstraction returns Abstraction:
		'abs' '(' component+=[Component|EString] "," component+=[Component|EString] ')'
 ;

Manifestation returns Manifestation:
		'man' '(' component+=[Component|EString] "," component+=[Component|EString] ')' 
;

Substitution returns Substitution:
		'sub' '(' component+=[Component|EString] "," component+=[Component|EString] ')' 
;

Dependency returns Dependency:
		'dep' '(' component+=[Component|EString] "," component+=[Component|EString] ')' 
;



Comment returns textualCommons::Comment: 
		'note' body=EString
;

Interface returns Interface: 
	{Interface}
	'interface'
	((name=STRING 'as' alias = ID)|name = ID)( (comments+=Comment)? |
		(('{' (comments+=Comment)? (member += Member)* '}')))
;


Connector returns Connector: 
	'Con' ((name=EString 'as' alias = ID)|name = ID) 
	'('
		port+=[Component|FQN] "," port+=[Component|FQN] "," interface=[Interface|EString]
	')';

Provide returns Provide: 
	{Provide}
		'provide' interface=[Interface|FQN]
;

Require returns Require: 
	{Require}
		'require' interface=[Interface|FQN]
;

enum Visibility returns textualCommons::Visibility: 
	PUBLIC = '+' 
	| PUBLIC = 'public'
	| PRIVATE = '-' 
	| PRIVATE = 'private'
	| PROTECTED = '#' 
	| PROTECTED = 'protected'
	| PACKAGE = '~'
;

EBoolean returns ecore::EBoolean: 
	'true' | 'false';


Method returns Method: 
	{Method}
	(visibility = Visibility)? 
	(abstract ?= 'abstract')? 
	(static ?= 'static')? 
	name = ID '(' 
	(parameters += Parameter (',' parameters += Parameter)*)* ')' 
	(':' type = [uml::Classifier|FQN])?
;

Attribute returns Attribute: 
	{Attribute} 
	(visibility = Visibility)? 
	(static ?= 'static')? 
	name = ID ':' type=[uml::Classifier|FQN]
;

Parameter returns Parameter: 
	(visibility = Visibility)? 
	(static ?= 'static')? 
	name = ID ':' type = [uml::Classifier|FQN]
;

	
FQN:
    ID ("." ID)*
;

@Override
terminal ID         : '^'?('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*;
terminal UNDERSCORE : '_';